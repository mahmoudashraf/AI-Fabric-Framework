ai:
  enabled: true
  pii-detection:
    enabled: true
    mode: DETECT_ONLY
    patterns:
      API_KEY:
        field-name: api_key
        regex: "sk-[A-Za-z0-9]{12,}"
        enabled: true
        replacement: ""
        confidence: 1.0
        context-note: API key redacted

  providers:
    llm-provider: ${LLM_PROVIDER:openai}
    embedding-provider: ${EMBEDDING_PROVIDER:onnx}
    enable-fallback: true

    onnx:
      enabled: true
      model-path: ${ONNX_MODEL_PATH:classpath:/models/embeddings/all-MiniLM-L6-v2.onnx}
      tokenizer-path: ${ONNX_TOKENIZER_PATH:classpath:/models/embeddings/tokenizer.json}
      max-sequence-length: 512
      use-gpu: false
      model-alias: all-MiniLM-L6-v2
    
    openai:
      enabled: ${OPENAI_ENABLED:false}
      api-key: ${OPENAI_API_KEY:test-key}
      model: gpt-4o-mini
      embedding-model: text-embedding-3-small
      max-tokens: 2000
      temperature: 0.3
      timeout: 60
      priority: 100
    
  # Vector Database Configuration - Memory for fast tests
  vector-db:
    type: memory
    lucene:
      index-path: ./data/test-lucene-index

  response-sanitization:
    enabled: true
    force-redaction: true
    warning-enabled: true
    guidance-enabled: true
    include-suggestion-metadata: true
    publish-events: true

# Logging for Test Profile
logging:
  level:
    root: INFO
    com.ai.infrastructure: DEBUG
    com.ai.infrastructure.embedding: DEBUG
    org.springframework: WARN
spring:
  liquibase:
    enabled: false
